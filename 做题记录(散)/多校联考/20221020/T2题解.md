# T2 仍旧是步履匆匆然而人群熙攘又有谁忘记了谁的好 (good)

## 题目描述

挑出一个长度为 $m$ 的子序列 $B$，即 $a_{b_1}, a_{b_2}, ..., a_{b_m}$。

使得 $\sum\limits_{i = 1}^m(m\times a_i) - \sum\limits_{i = 1}^m\sum\limits_{j = 1}^mf(\min(b_i, b_j), \max(b_i, b_j))$ 最大。其中 $f(i, j) = \min(a_i, a_{i + 1}, ..., a_j)$。

输出这个最大值。

$1\leq m\leq n\leq 4000$

## 题目分析

正解笛卡尔树 + 树形 DP

很遗憾我不会做，但是我用了另一个做法把所有数据全部水过去了。

我不知道这个做法的正确性(多半是假的)，所以请不要学习此做法。

先将前 $m$ 个数当作答案算出一个结果。接下来计算 $m + 1$ 到 $n$ 这些点。

当我们扫到一个点时，去找对于当前那 $m$ 个数，删掉那个数并加上这个数所产生的权值差值。

如果存在一个权值差值为正，找到最大的权值差值，将那个数删掉并将这个数加进去。

否则跳过这个数去扫下一个数。

时间复杂度 $\mathcal{O}(n^2)$

## 参考代码

