# T3 当希望的最后一片积雨云消逝在炽热的晚霞中之时 (cumulonimbus)

## 题目描述

摇曳的篝火前，jzyz 的大家为chunzhen送别。

但chunzhen不希望过于伤感，他望向面前的 $n$ 个火堆。这 $n$ 个火堆拍成一排，第 $i$ 个火堆的火苗亮度为 $a_i$。

每个时刻，会有风从左往右吹，对于每一个 $a_i$，都会变成 $\max(a_{i - 1}, a_i)$（所有的变化同时产生）。

chunzhen很好奇，他会给出 $q$ 次询问，询问你，$t$ 时刻，$[l, r]$ 区间内所有火堆的亮度和，定义初始时为0时刻。

$1\leq n, q\leq 2\times 10^5$

## 题目分析

以时间轴为纵轴，节点编号为横轴，建立一个平面直角坐标系。

起始有 $n$ 个点，分别在 $(1, 0), (2, 0), ..., (n, 0)$，点的值为 $a_1, a_2, ..., a_n$。

每次向上拓展 $1$ 时，位于 $(i, j)(1\leq i, j\leq n)$ 的点的值为 $\max(val(i, j - 1), val(i - 1, j - 1))$

因此就可以得到一个类似于下图的结构

![](https://raw.fastgit.org/LittleYang0531/image/main/blog/1.jpg)

