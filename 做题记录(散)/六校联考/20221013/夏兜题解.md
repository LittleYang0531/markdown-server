# T3 夏兜(pockets)

## 题目描述 

有一个长度为 $n$ 的序列 $a$，有两个人 A 和 B。一开始 A 在 $a_1$ 上，B 在 $a_2$ 上，每次在最左边的人会移动到他右边一个没有被走过的位置。每个人都想要他走过的位置的数之和最大，求最后 A 走过的数之和减去 B 走过的数之和。

$q$ 次询问，要你每次修改 $a_n$ 的值，并给出当前情况下的答案。

$n, q\leq 2\times 10^5, \sum\limits_{i = 1}^{n - 1}a_i\leq 10^6, a_n\leq 10^9$。

## 题目分析

手玩几组样例，你会发现最后一个人能够走过的位置会是一段一段的，最后两个人一定会拿完所有的数。

由于从左往右推会导致决策性问题，因此设 $f_i$ 表示当前这个人到 $i$ 点的期望答案，那么 

$$f_i = \max\limits_{j > i + 1}-f_{i - 1} + a_j - (s_{j - 1} - s_i)$$

维护后缀最大值即可。

再手玩几组样例，你又会发现，$f_i = |f_{i + 1} - a_{i + 1}|$，于是我们就可以用 $\mathcal{O}$ 单次计算答案。

