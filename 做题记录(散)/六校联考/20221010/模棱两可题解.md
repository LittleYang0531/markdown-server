# T2 模棱两可 (ambiguous)

## 题目描述 

给定一个序列 $a_1, a_2, ..., a_n$，每次询问一个区间 $[l, r]$ 内出现最多的数的出现次数。

但今天我们不太关心问题的精确答案，只关心问题的数量级。因此，如果精确答案是 $ans$，你的
回答只要在 $[0.5ans, 2ans]$ 内就算你对。

## 题目分析

对于颜色 $𝑐$, 设其出现的位置分别为 $𝑝_1, 𝑝_2, ... , 𝑝_𝑚$, 我们考虑对于所有长度 $l = 1, a, a^2, ...$ 进行检查, 也即对于 $𝑗 − 𝑖 + 1 = 𝑙$ 的线段 $[𝑝_𝑖, 𝑝_𝑗]$, 对于每个询问, 我们只检查其包含的线段中 $𝑙$ 的最大值. 如果这个答案为 $𝑥$, 说明精确答案在 $[𝑥, a𝑥)$ 之间, 取 $a = 4$, 我们输出 $2𝑥$ 即可. 容易做到 $\mathcal{𝑂}((𝑛 + 𝑞) \log 𝑛)$. (其实也能做到 $\mathcal{𝑂}((𝑛 + 𝑞) log log 𝑛)$, 读者可以自行思考.)